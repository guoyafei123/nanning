<template>
  <div class="Inspection_plan">
    <div class="font-white margin-left15 margin-right20 display-none" style="margin-top:140px;">
      <section>
          <div class="personinfo">
            <p>
              <span class="size-20 font-blue">控烟严格巡查</span>
              <span class="bgbox-min bg-gray-666 font-black">举报检查</span>
              <span class="float-right">
                        <span class="font-black size-12 bg-red" style="padding:2px 5px;">未激活</span>
                    </span>
            </p>
            <p>
              <span class="size-12 font-gray-666"><i class="fa fa-th-large"></i> 良庆区中心小学</span>
              <span class="size-12 font-gray-666 float-right set-positiontop2">激活时间<span class="font-gray-999 margin-left5">2018.7.6 08:00:00</span></span>
            </p>
          </div>
        </section>
      <section class="inspection-iteminfo " >
        <section>
          <div class="row toolcount margin-top40">
            <div class="col-sm-4  font-gray-999 padding-right0">
              <ul class="toolcount-left margin-bottom0 padding-left0" id="toolcount">
                <li>
                  <p class="size-70 font-blue" style="line-height:90px;">650</p>
                </li>
                <li>
                  <p class="size-10 text-center">Running Counts</p>
                </li>
                <li>
                  <p class="size-16 font-blue">每日额定完成数</p>
                </li>
              </ul>
            </div>
            <div class="col-sm-8 font-gray-999 padding-left0 padding-right0">
              <ul class="toolcount-right padding-left15 margin-bottom0 margin-left15">
                <li>
                  <p class="size-16 font-gray-ccc">路线信息</p>
                </li>
                <li>
                  <p class="size-10 set-scaleright">Inspection Info</p>
                </li>
                <li>
                  <p class="size-12">添加人&#x3000;&#x3000;<span class="font-gray-ccc">郭亚飞</span></p>
                </li>
                <li>
                  <p class="size-12">添加时间 &#x3000;<span class="font-gray-ccc">2018.10.10 15:10:10</span></p>
                </li>
                <li class="row text-center padding-right16 margin-top5">
                  <div class="col-sm-4 container-padding0 personnel-borderright">
                    <p class="size-16 font-white" style="width:100%;line-height: 10px;">是</p>
                    <p class="size-12 margin-bottom0">扫码打卡</p>
                  </div>
                  <div class="col-sm-4 container-padding0 personnel-borderright">
                    <p class="size-16 font-white" style="width:100%;line-height: 10px;">25</p>
                    <p class="size-12 margin-bottom0">节点总数</p>
                  </div>
                  <div class="col-sm-4 container-padding0">
                    <p class="size-16 font-white" style="width:100%;line-height: 10px;">-</p>
                    <p class="size-12 margin-bottom0">巡检人数</p>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>
        <section>
          <div class="toolbuildrate margin-top30">
            <h2 class="size-14 font-gray-ccc">
              <span class="tool-rect bg-blue"></span>路线详情 </h2>
            <div class="panel-group tablist-item margin-left15" id="accordion" role="tablist" aria-multiselectable="true">
              <div class="panel panel-default bg-none border-none border-radiusnone">
                <div class="panel-heading bg-gray-222 font-gray-999 tablist-itemtitle" role="tab" id="headingOne">
                  <span class="itemtitle-rect"><i class="fa fa-th-large font-gray-333"></i></span>
                  <h4 class="panel-title">
                    <a role="button" class="size-12" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      国西中天大厦<span class="itemtitle-value display-inline-block margin-left10 bg-red font-black">1.6</span>
                    </a>
                  </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                  <div class="panel-body padding3">
                    <ul class="size-12 font-gray-999 tablist-itemul">
                      <li>
                          <span>国西中天大厦1层
                            <span class="float-right">
                              <i class="fa fa-th-large font-yellow"></i>
                              <span class="font-blue">23</span>/<span class="font-yellow">14</span>
                            </span>
                          </span>
                      </li>
                      <li>
                          <span>国西中天大厦1层
                            <span class="float-right">
                              <i class="fa fa-th-large font-yellow"></i>
                              <span class="font-blue">23</span>/<span class="font-yellow">14</span>
                            </span>
                          </span>
                      </li>
                      <li>
                          <span>国西中天大厦1层
                            <span class="float-right">
                              <i class="fa fa-th-large font-yellow"></i>
                              <span class="font-blue">23</span>/<span class="font-yellow">14</span>
                            </span>
                          </span>
                      </li>
                      <li>
                          <span>国西中天大厦1层
                            <span class="float-right">
                              <i class="fa fa-th-large font-yellow"></i>
                              <span class="font-blue">23</span>/<span class="font-yellow">14</span>
                            </span>
                          </span>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="panel-heading bg-gray-222 font-gray-999 tablist-itemtitle" role="tab" id="footerone">
                  <span class="itemtitle-rect"><i class="fa fa-th-large font-gray-333"></i></span>
                  <h4 class="panel-title">
                    <a role="button" class="size-12" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      国西中天大厦<span class="itemtitle-value display-inline-block margin-left10 bg-red font-black">1.6</span>
                    </a>
                  </h4>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section>
          <div class="toolbuildrate margin-top30">
            <h2 class="size-14 font-gray-ccc"><span class="tool-rect bg-blue"></span>操作日志</h2>
            <div class="main_content_table">
              <el-table
                :data="tableData"
                border
                :default-sort = "{prop: 'Serial_number', order: 'descending'}"
                style="width: 100%;height:100px;">
                <el-table-column
                  sortable
                  prop="Serial_number"
                  type="index"
                  width="60"
                  label="序号">
                </el-table-column>
                <el-table-column
                  prop="createTime"
                  width="140"
                  label="操作时间">
                </el-table-column>
                <el-table-column
                  prop="createUserName"
                  label="操作人">
                </el-table-column>
                <el-table-column
                  prop="amount"
                  label="动作">
                </el-table-column>
              </el-table>
            </div>
            <div class="main_content_bottom">
              <div class="bottom_con">
                <div class="float-left" style="margin-top:5px;">
                  <a href="javascript:;" class="font-gray-666" style="margin-left:5px;">打印</a>
                  <a href="javascript:;" class="font-gray-666" style="margin-left:5px;">导出</a>
                </div>
                <el-pagination style="float: right;background: transparent"
                               @size-change="handleSizeChange"
                               @current-change="handleCurrentChange"
                               :current-page="currentPage4"
                               :page-size="10"
                               layout="prev, pager, next"
                               :total="totalList">
                </el-pagination>
                <span style="float: right;margin-top:5px;color: #666;margin-left:5px;margin-right:10px;">{{page}}页</span>
                <el-pagination style="float: right;"
                               @size-change="handleSizeChange"
                               @current-change="handleCurrentChange"
                               :current-page="currentPage4"
                               :page-size="10"
                               layout="total"
                               :total="totalList">
                </el-pagination>

              </div>
            </div>
          </div>
        </section>
      </section>
    </div>
    <div class="font-white margin-left15 margin-right20" style="margin-top:120px;">
      <h2 style="font-size: 12px;line-height:10px;margin-bottom:-10px;" class="font-gray-999">Inspection Total</h2>
      <h3 style="font-size:18px;" class="font-blue">当前线路总数</h3>
      <div style="width:100%;overflow: hidden;">
        <p style="width:15%;font-size: 70px;margin-left:20px;float: left">8</p>
        <ul class="inspection_ul">
          <li>
            未激活<span>3</span>
          </li>
          <li>
            已激活<span>5</span>
          </li>
          <li>
            已删除<span>6</span>
          </li>
          <li>
            节点总数<span>30</span>
          </li>
          <li>
            扫码打卡<span>2</span>
          </li>
        </ul>
      </div>
      <section style="display: none;">
        <div class="toolbuildrate margin-top30">
          <div class="main_content_table">
            <el-table
              :data="tableData"
              border
              :default-sort = "{prop: 'Serial_number', order: 'descending'}"
              style="width: 100%;height:300px;">
              <el-table-column
                sortable
                prop="Serial_number"
                type="index"
                width="60"
                label="序号">
              </el-table-column>
              <el-table-column
                prop="createTime"
                width="140"
                label="操作时间">
              </el-table-column>
              <el-table-column
                prop="createUserName"
                label="操作人">
              </el-table-column>
              <el-table-column
                prop="amount"
                label="动作">
              </el-table-column>
            </el-table>
          </div>
          <div class="main_content_bottom">
            <div class="bottom_con">
              <div class="float-left" style="margin-top:5px;">
                <a href="javascript:;" class="font-gray-666" style="margin-left:5px;">打印</a>
                <a href="javascript:;" class="font-gray-666" style="margin-left:5px;">导出</a>
              </div>
              <el-pagination style="float: right;background: transparent"
                             @size-change="handleSizeChange"
                             @current-change="handleCurrentChange1"
                             :current-page="currentPage4"
                             :page-size="10"
                             layout="prev, pager, next"
                             :total="totalList">
              </el-pagination>
              <span style="float: right;margin-top:5px;color: #666;margin-left:5px;margin-right:10px;">{{page}}页</span>
              <el-pagination style="float: right;"
                             @size-change="handleSizeChange"
                             @current-change="handleCurrentChange1"
                             :current-page="currentPage4"
                             :page-size="10"
                             layout="total"
                             :total="totalList">
              </el-pagination>

            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

</template>

<script>
  export default {
    data() {
      return {
        tableData: [],//路线列表
        page:null,//总页数
        totalList:null,//总条数
        currentPage4: 1//当前页
      };
    },
    methods: {
      handleSizeChange(val) {
        console.log(`每页 ${val} 条`);
      },
      handleCurrentChange(val) {
        this.currentPage4 = val;
        $('.el-pager li.active').css({'color':'#fff','background-color':'#333333'}).siblings().css({'color':'#666','background-color':'transparent'})
      },
      handleCurrentChange1(val) {
        this.currentPage4 = val;
        $('.el-pager li.active').css({'color':'#fff','background-color':'#333333'}).siblings().css({'color':'#666','background-color':'transparent'})
      },
      tableList(){
        this.$fetch(
          "/api/admin/inspection/queryInspectionPlanList",{
            currentPage:this.currentPage4,
            pageSize:10
          }
        )
          .then(response => {
            console.log(response);
            if (response) {
              // console.log(response.data.inspectionPlanList);
              this.totalList = response.data.total;
              this.tableData = response.data.inspectionPlanList;
              if(this.totalList % 10 == 0){
                this.page = parseInt( this.totalList / 10 )
              }else{
                this.page = parseInt( this.totalList / 10 ) + 1
              }
            }
          })
          .then(err => {
            // console.log(err);
          });
      }
    },
    mounted() {
      this.tableList();
    },
    watch:{
      currentPage4(val, oldVal){
        this.currentPage4 = val;
        console.log(this.currentPage4);
        this.tableList();
      }
    }
  };
</script>

<style lang="scss" scoped>
  .padding-right16 {
    padding-right: 16px;
  }
  .inspection_ul{
    width:75%;
    float: left;
    margin-top:30px;
    li{
      float: left;
      width:33%;
      font-size: 12px;
      color: #999999;
      height: 30px;
      span{

        margin-left:8px;
        color: #cccccc;
      }
      &:nth-child(1){
        span{
          margin-left:20px;
          color: red;
        }
      }
      &:nth-child(2){
        span{
          margin-left:19px;
        }
      }
    }
  }

</style>
